<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartGrocery.uk - Connecting Local Shops with Local Customers</title>

    <meta name="description"
          content="SmartGrocery.uk connects local independent high street shops directly with customers. Get early access to local groceries, butchers, and bakers!">

    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-K04QZD1731"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-K04QZD1731');
    </script>
</head>
<body>

<header class="header">
    <div class="container">
        <h1 class="logo">SmartGrocery<span class="logo-dot">.uk</span></h1>
        <nav>
            <a href="#mission">Our Mission</a>
            <a href="#features">How It Works</a>
            <a href="#partner-with-us">For Shops</a>
            <a href="#early-access" class="cta-button-nav">Get Early Access</a>
        </nav>
    </div>
</header>

<section class="hero-section">
    <div class="container">
        <div class="hero-content">
            <h2>Go Digital, Stay Local.</h2>
            <p>The platform connecting local independent high street shops directly with customers in their community,
                offering **online grocery shopping** across the **UK**.</p>
            <a href="#early-access" class="cta-button-large" id="hero-cta">Find Shops Near You</a>
        </div>
        <div class="hero-image-placeholder">
            <img src="images/local-market-placeholder.jpg"
                 alt="A vibrant display of fresh, local produce in a market setting." class="main-hero-image">
            <p class="image-credit">Image Placeholder: Replace with a free stock photo.</p>
        </div>
    </div>
</section>

<section id="mission" class="mission-section">
    <div class="container">
        <h3>How SmartGrocery.uk Works for Customers</h3>
        <p id="features" class="mission-statement">
            Getting fresh, local produce and supporting your community is easy. Follow these simple steps to start
            shopping!
        </p>
        <div class="feature-grid">
            <div class="feature-item">
                <h4>1. üîé Discover Local Shops</h4>
                <p>Enter your location to see a list of **local independent shops** near you. Browse their profiles,
                    check ratings, and select your favourite grocer, baker, or butcher.</p>
            </div>
            <div class="feature-item">
                <h4>2. üõí Browse & Buy Online</h4>
                <p>Explore the shop's full, real-time catalog. Add fresh produce, artisanal goods, and high-quality
                    items to your basket and complete your purchase securely online.</p>
            </div>
            <div class="feature-item">
                <h4>3. ‚è±Ô∏è Select or Quick Collect</h4>
                <p>Choose a specific **time slot** to collect your order. If you're flexible or in a rush, simply choose
                    **Quick Collect**‚Äîyour order will be ready for pickup in approximately **30 minutes**.</p>
            </div>
        </div>
    </div>
</section>

<section class="shops-teaser-section">
    <div class="container">
        <h3>‚≠ê Spotlight on Our Upcoming Shops</h3>
        <p class="teaser-statement">
            We're partnering with the highest-rated local businesses to bring you the best quality. Get excited for
            these partners launching soon!
        </p>
        <div class="shop-grid">
            <div class="shop-item">
                <div class="shop-image-blurred">
                    <img src="images/fnf-logo.jpg" alt="Blurred teaser image of a local bakery shop front."
                         class="blurred-image">
                </div>
                <div class="shop-info">
                    <h4>Indian Grocery</h4>
                    <div class="shop-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (4.9)</div>
                </div>
            </div>
            <div class="shop-item">
                <div class="shop-image-blurred">
                    <img src="images/butcher-logo.jpg" alt="Blurred teaser image of a local butcher shop interior."
                         class="blurred-image">
                </div>
                <div class="shop-info">
                    <h4>Finest Meats & Deli</h4>
                    <div class="shop-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (4.8)</div>
                </div>
            </div>
            <div class="shop-item">
                <div class="shop-image-blurred">
                    <img src="images/mi-logo.jpg" alt="Blurred teaser image of a local flower shop."
                         class="blurred-image">
                </div>
                <div class="shop-info">
                    <h4>Indian Subcontinent Grocery</h4>
                    <div class="shop-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (5.0)</div>
                </div>
            </div>
            <div class="shop-item">
                <div class="shop-image-blurred">
                    <img src="images/organic-shop-image.jpg" alt="Blurred teaser image of a local fruit and vegetable stall."
                         class="blurred-image">
                </div>
                <div class="shop-info">
                    <h4>The Organic Grocer</h4>
                    <div class="shop-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ (4.7)</div>
                </div>
            </div>
        </div>
        <a href="#early-access" class="cta-button-large">Be the First to Shop!</a>
    </div>
</section>

<section id="partner-with-us" class="vendor-section">
    <div class="container">
        <h3>ü§ù Partner with SmartGrocery.uk</h3>
        <p class="vendor-tagline">
            Helping independent high street businesses thrive in the digital age‚Äîwithout losing your personal touch.
        </p>
        <div class="vendor-benefits-grid">
            <div class="benefit-item">
                <h4>Reach More Customers</h4>
                <p>Tap into a new, local online customer base and compete with major chains using our platform.</p>
            </div>
            <div class="benefit-item">
                <h4>Maintain Your Brand</h4>
                <p>Your shop's authenticity, quality, and personal service shine through on your dedicated digital storefront.</p>
            </div>
            <div class="benefit-item">
                <h4>Simple Order Management</h4>
                <p>Manage inventory, receive orders, and prepare for collection with a simple, intuitive dashboard.</p>
            </div>
        </div>

        <h4 class="vendor-cta-heading">Ready to Go Digital?</h4>

        <form action="https://api.web3forms.com/submit" method="POST" class="vendor-interest-form" id="vendor-interest-form">
            <input type="hidden" name="access_key" value="ef366eb1-fc9a-4789-942f-8be22ee082df">
            <input type="hidden" name="subject" value="New Vendor Interest for SmartGrocery.uk">
            <input type="text" name="Shop Name" placeholder="Shop Name (e.g., Jane's Bakery)" required>
            <input type="text" name="Shop Type" placeholder="Type of Shop (e.g., Butcher, Grocer)" required>
            <input type="email" name="Email" placeholder="Contact Email Address" required>
            <button type="submit" class="cta-button-large">Apply for Partnership</button>
            <p id="vendor-result" style="margin-top: 15px; font-weight: 600;"></p>
        </form>

        <p class="small-print">We are currently onboarding partners in select UK regions. Register your interest now!</p>
    </div>
</section>


<section id="early-access" class="early-access-banner">
    <div class="container">
        <h4>Get Early Access & Exclusive Offers!</h4>
        <p>Be one of the first few customers to use SmartGrocery.uk and receive special offers from your local
            shops.</p>

        <form action="https://api.web3forms.com/submit" method="POST" class="email-signup-form-extended" id="customer-signup-form">
            <input type="hidden" name="access_key" value="ef366eb1-fc9a-4789-942f-8be22ee082df">
            <input type="hidden" name="subject" value="New Customer Early Access Request">

            <input type="email" name="Email" id="email-input" placeholder="Enter your email address..." required>
            <input type="text" name="Suggestion" placeholder="Which type of shop would you love to see?"
                   class="optional-input" id="suggestion-input">

            <p id="word-count-display" class="small-print"></p>

            <button type="submit" class="cta-button-large alt" id="customer-submit-button">Sign Me Up</button>
            <p id="customer-result" style="margin-top: 15px; font-weight: 600;"></p>
        </form>
        <p class="small-print">We respect your privacy. No spam, just local goodness.</p>
    </div>
</section>

<footer>
    <div class="container">
        <div class="footer-links">
            <a href="privacy-policy.html">Privacy Policy</a>
            <a href="terms-of-service.html">Terms of Service</a>
            <a href="accessibility.html">Accessibility Statement</a>
        </div>
        <p>&copy; 2025 SmartGrocery.uk. Support Local. Shop Smart.</p>
    </div>
</footer>

<script>
    document.addEventListener('DOMContentLoaded', (event) => {
        // --- Global Elements ---
        const emailInput = document.getElementById('email-input');
        const ctaButtons = document.querySelectorAll('a[href="#early-access"]');

        // --- Customer Form Elements ---
        const customerForm = document.getElementById('customer-signup-form');
        const suggestionInput = document.getElementById('suggestion-input');
        const wordCountDisplay = document.getElementById('word-count-display');
        const customerResult = document.getElementById('customer-result');
        const MAX_WORDS = 20;

        // --- Vendor Form Elements ---
        const vendorForm = document.getElementById('vendor-interest-form');
        const vendorResult = document.getElementById('vendor-result');


        // --- 1. Auto-Focus Logic ---
        ctaButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                setTimeout(() => {
                    if (emailInput) {
                        emailInput.focus();
                    }
                }, 500);
            });
        });

        if (window.location.hash === '#early-access' && emailInput) {
            emailInput.focus();
        }

        // --- 2. Robust Word Count Logic (NOW INCLUDES TRUNCATION) ---
        function updateWordCount() {
            if (!suggestionInput || !wordCountDisplay) return;

            const text = suggestionInput.value.trim();
            const words = text ? text.split(/\s+/).filter(word => word !== '') : [];
            let currentWordCount = words.length;

            // CRITICAL FIX: If we exceed the max, we truncate the input value immediately.
            if (currentWordCount > MAX_WORDS) {
                // Slice the array of words and rejoin them to cut the extra words
                suggestionInput.value = words.slice(0, MAX_WORDS).join(' ');
                currentWordCount = MAX_WORDS; // Set display count to max
            }

            // Update display text and color
            wordCountDisplay.textContent = `Word count: ${currentWordCount} / ${MAX_WORDS}`;

            if (currentWordCount === MAX_WORDS) {
                wordCountDisplay.style.color = '#e74c3c'; // Red at limit
                wordCountDisplay.style.display = 'block';
            } else if (currentWordCount >= MAX_WORDS * 0.8) {
                wordCountDisplay.style.color = 'orange'; // Warning color
                wordCountDisplay.style.display = 'block';
            } else if (currentWordCount > 0) {
                wordCountDisplay.style.color = 'inherit'; // Default color
                wordCountDisplay.style.display = 'block';
            } else {
                wordCountDisplay.style.color = 'inherit';
                wordCountDisplay.style.display = 'block';
            }
        }

        // Attach event listener for the customer suggestion field
        if (suggestionInput) {
            suggestionInput.addEventListener('input', updateWordCount);
            updateWordCount(); // Initial call
        }


        // --- 3. Unified Web3Forms Submission Logic (Submission check remains strong) ---
        function handleWeb3FormSubmit(formElement, resultElement, formName) {
            if (!formElement) return;

            formElement.addEventListener('submit', function (e) {
                e.preventDefault();

                // Final Word Count Check (Specific to Customer Form - REDUNDANT BUT SAFEGUARD)
                if (formName === 'customer_early_access' && suggestionInput) {
                    const text = suggestionInput.value.trim();
                    const words = text ? text.split(/\s+/).filter(word => word !== '') : [];

                    // If the user somehow bypassed the input handler (e.g., paste), halt submission.
                    if (words.length > MAX_WORDS) {
                        resultElement.textContent = `Error: Please limit your suggestion to ${MAX_WORDS} words.`;
                        resultElement.style.color = '#e74c3c';
                        return; // HALT SUBMISSION
                    }
                }

                resultElement.textContent = "Sending...";
                resultElement.style.color = '#333';

                const formData = new FormData(formElement);
                const accessKey = formData.get('access_key');

                if (accessKey === 'YOUR_ACCESS_KEY_HERE') {
                    resultElement.textContent = "Error: Please replace YOUR_ACCESS_KEY_HERE with your actual Web3Forms Access Key.";
                    resultElement.style.color = '#e74c3c';
                    return;
                }

                const object = {};
                formData.forEach((value, key) => { object[key] = value; });
                const json = JSON.stringify(object);

                fetch('https://api.web3forms.com/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: json
                })
                    .then(async (response) => {
                        if (response.ok) {
                            gtag('event', 'lead_form_submitted', { 'form_name': formName, 'success': true });
                            resultElement.textContent = "Success! Thank you.";
                            resultElement.style.color = '#00b98b';
                            formElement.reset();
                            if (formName === 'customer_early_access') updateWordCount(); // Reset word count
                        } else {
                            gtag('event', 'lead_form_submitted', { 'form_name': formName, 'success': false });
                            const responseJson = await response.json();
                            resultElement.textContent = responseJson.message || "Submission failed! Please try again.";
                            resultElement.style.color = '#e74c3c';
                        }
                    })
                    .catch(error => {
                        gtag('event', 'lead_form_submitted', { 'form_name': formName, 'success': false, 'error_type': 'network' });
                        resultElement.textContent = "Network error. Please try again.";
                        resultElement.style.color = '#e74c3c';
                    })
                    .finally(function () {
                        setTimeout(() => {
                            resultElement.textContent = "";
                        }, 5000);
                    });
            });
        }

        // --- 4. Initialize Forms ---
        handleWeb3FormSubmit(customerForm, customerResult, 'customer_early_access');
        handleWeb3FormSubmit(vendorForm, vendorResult, 'vendor_interest');
    });
</script>

</body>
</html>